<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Mikroverunreinigungen in Schweizer Gewässern darstellen • mvwizr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Mikroverunreinigungen in Schweizer Gewässern darstellen">
<meta name="description" content="Tools um Mikroverunreinigungsdaten aus Schweizer Gewässern gemäss den Bestimmungen der Gewässerschutzverordnung (GSchV) darzustellen.">
<meta property="og:description" content="Tools um Mikroverunreinigungsdaten aus Schweizer Gewässern gemäss den Bestimmungen der Gewässerschutzverordnung (GSchV) darzustellen.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Direkt zum Inhalt springen</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Seitennavigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mvwizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Navigation ein-/ausschalten">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/mvwizr.html">Erste Schritte</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Verzeichnis</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-artikel" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Artikel</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-artikel">
<li><a class="dropdown-item" href="articles/berechnete-mischproben.html">Berechnete Mischproben</a></li>
    <li><a class="dropdown-item" href="articles/datei-spezifikationen.html">Dateispezifikationen für mvwizr</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Änderungsprotokoll</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Suchen nach" placeholder="Suchen nach" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="mvwizr-">mvwizr <img src="reference/figures/mvwizr_logo.png" align="right" width="120"><a class="anchor" aria-label="anchor" href="#mvwizr-"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="übersicht">Übersicht<a class="anchor" aria-label="anchor" href="#%C3%BCbersicht"></a>
</h2>
<p>mvwizr soll die visuelle Auswertung von Mikroverunreinigungen (MV) in Schweizer Gewässern gemäss dem <a href="https://modul-stufen-konzept.ch/" class="external-link">Modul-Stufen-Konzept</a> erleichtern. Das Paket basiert auf einem Auftrag des Gewässer- und Bodenschutzlabor des Kantons Bern (GBL) an EBP Schweiz. Die Auswertungs- und Plotfunktionen sind aber bewusst so konzipiert, dass sie auch mit MV-Daten anderer Kantone funktionieren können. Insbesondere unterstützt mvwizr auch das NAWA (Nationale Beobachtung Oberflächengewässeruqalität)-Datenformat, das von verschiedenen Kantonen verwendet wird. Das Paket ist modular aufgebaut und kann daher leicht erweitert werden, um weitere Funktionen oder Datenformate zu unterstützen.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>mvwizr ist nicht auf CRAN veröffentlicht und kann daher am Einfachsten direkt von github installiert werden. Das Paket benötigt mindestens R 4.1. Alternativ kann das Paket z.B. auch auf <a href="https://posit.cloud/" class="external-link">Posit Cloud</a> installiert und getestet werden. Für die Installation auf einem lokalen Rechner (Windows/macOS/Linux) folgende Kommandos ausführen:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span> <span class="co"># falls noch nicht installiert</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"ror-at-ebp/mvwizr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="updates">Updates<a class="anchor" aria-label="anchor" href="#updates"></a>
</h2>
<p>Das Paket wird sporadisch aktualisiert zwecks Fehlerbehebung, Erweiterung der Funktionen und Aktualisierung der Daten (BAFU-ID-Lookup, Qualitätskriterien des Ökotoxzentrums, VSA-ID-Lookup, Rechtliche Anforderungen). Um das Paket zu aktualisieren, kann der gleiche Befehl wie bei der Installation verwendet werden. Dabei sollte eine Meldung wie die folgende erscheinen:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>→ Will update <span class="dv">1</span> package.</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>→ The <span class="fu">package</span> (<span class="dv">0</span> B) is cached.</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="sc">+</span> mvwizr <span class="dv">1</span>.<span class="fl">0.0</span> → <span class="dv">1</span>.<span class="fl">1.0</span> [bld][cmp] (GitHub<span class="sc">:</span> <span class="dv">35</span>d7e78)</span></code></pre></div>
<div class="section level3">
<h3 id="übersicht-über-aktuell-gebundelte-daten">Übersicht über aktuell gebundelte Daten<a class="anchor" aria-label="anchor" href="#%C3%BCbersicht-%C3%BCber-aktuell-gebundelte-daten"></a>
</h3>
<ul>
<li>BAFU-ID-Lookup (“BAFU_Liste_Parameter_Bezeichnungen_Datenaustausch”): Version 12.2024</li>
<li>Dat Qualitätskriterien des Ökotoxzentrums: Version Juni 2025 (Auszug vom VSA)</li>
<li>Tab Substanzen des VSA: Auszug aus Datenbank Juli 2025</li>
<li>Tab Anforderungen Recht des VSA: Version Juni 2025</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="verwendung">Verwendung<a class="anchor" aria-label="anchor" href="#verwendung"></a>
</h2>
<p>Das Paket stellt verschiedene Funktionen zum Umgang mit MV-Daten bereit vom Einlesen, über das Auswerten/Berechnen bis (hauptsächlich) zum Visualisieren. Viele Funktionen sind für Mischproben gedacht und unterstützen sowohl eine Auswertung für kurzzeitige Verunreinungen als auch für andauernde Verunreinigungen.</p>
<div class="section level3">
<h3 id="erste-schritte">Erste Schritte<a class="anchor" aria-label="anchor" href="#erste-schritte"></a>
</h3>
<p>Nach der Installation kann mvwizr in Scripts oder in der Konsole verwendet werden, indem das Paket geladen wird:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ror-at-ebp.github.io/mvwizr/">mvwizr</a></span><span class="op">)</span></span></code></pre></div>
<p>Eine Einführung in die Verwendung des Pakets findet sich auf der <a href="https://ror-at-ebp.github.io/mvwizr/articles/mvwizr.html">Paketwebseite</a>. Dort sind auch verschiedene Hilfe-Artikel zu finden, die die Verwendung des Pakets demonstrieren.</p>
</div>
<div class="section level3">
<h3 id="hilfe-erhalten">Hilfe erhalten<a class="anchor" aria-label="anchor" href="#hilfe-erhalten"></a>
</h3>
<p>Das Paket enthält verschiedene eingebaute Möglichkeiten, Hilfe zu erhalten:</p>
<ul>
<li>
<code>?funktion</code>: Zeigt die Hilfe für eine bestimmte Funktion an, also z.B. <code><a href="reference/einlesen_mv_gbl.html">?einlesen_mv_gbl</a></code>.</li>
<li>
<code>??mvwizr</code>: Zeigt die Hilfeseiten zu den gebundelten Beispieldaten an.</li>
</ul>
<p>Daneben sind für die meisten Funktionen auch Beispiele in den Hilfeseiten enthalten, die die Verwendung der Funktionen demonstrieren. Auf der Paketwebseite sind zudem Artikel mit spezifischen Hilfethemen veröffentlicht: <a href="https://ror-at-ebp.github.io/mvwizr/" class="uri">https://ror-at-ebp.github.io/mvwizr/</a>.</p>
<p>Folgende Funktionen werden vom Paket exportiert und können direkt verwendet werden:</p>
</div>
<div class="section level3">
<h3 id="einlesen">Einlesen<a class="anchor" aria-label="anchor" href="#einlesen"></a>
</h3>
<p>Alle Funktionen zum Einlesen und Berechnen sind in der Datei <code>R/parsing.R</code> enthalten.</p>
<ul>
<li>
<code><a href="reference/einlesen_nawa.html">einlesen_nawa()</a></code>: Liest einzelne MV-Dateien (oder Dataframes) im NAWA-Format ein, normalisiert Einheiten, entfernt Duplikate, bestimmt Bestimmungsgrenzen aus Daten und verknüpft Daten mit der VSA Substanz_ID. Für das Einlesen notwendige Parameter können der Funktion als Argumente übergeben werden. Test-Daten werden mitgeliefert (siehe Beispiele im Hilfetext der Funktion).</li>
<li>
<code><a href="reference/batch_einlesen_nawa.html">batch_einlesen_nawa()</a></code>: Liest mehrere NAWA-MV-Daten-Dateien ein, entweder über ein Import-Manifest oder eine Liste von Dateipfaden. Die Funktion kann auch die Parameter wie Encoding, Header, Delimiter und Sprache erraten, wenn diese nicht angegeben sind in Form eines Import-Manifests (oder nur teilweise).</li>
<li>
<code>schreibe_schreibe_nawa_import_manifest_template()</code>: Erstellt ein Excel-Template für ein Import-Manifest, das für die Funktion <code><a href="reference/batch_einlesen_nawa.html">batch_einlesen_nawa()</a></code> verwendet werden kann. Der Pfad zu den MV-Dateien kann angegeben werden um diese in das Template zu schreiben. Das Manifest kann dann angepasst werden, um die Parameter für das Einlesen der NAWA-Daten zu definieren.</li>
<li>
<code><a href="reference/einlesen_mv_gbl.html">einlesen_mv_gbl()</a></code>: Liest die MV-Daten des GBL ein, normalisiert Einheiten, entfernt Duplikate, bestimmt Bestimmungsgrenzen aus Daten und verknüpft Daten mit der VSA Substanz_ID. Test-Daten werden mitgeliefert (siehe Beispiele im Hilfetext der Funktion).</li>
<li>
<code><a href="reference/einlesen_bafu_lookup.html">einlesen_bafu_lookup()</a></code>: Liest die Lookup-Tabelle <code>BAFU_Liste_Parameter_Bezeichnungen_Datenaustausch.xlsx</code> des BAFU aus. Diese kann verwendet werden, um z.B. die französische Übersetzung einer Substanz zu erhalten. Eine Kopie der Datei wird mitgeliefert (siehe Beispiele im Hilfetext der Funktion).</li>
<li>
<code><a href="reference/einlesen_kriterien.html">einlesen_kriterien()</a></code>: Liest die Qualitätskriterien des VSA ein und entfernt Duplikate (Bevorzugung tieferer CQK und AQK für die Auswahl). Eine Kopie der Datei wird mitgeliefert (siehe Beispiele im Hilfetext der Funktion).</li>
<li>
<code><a href="reference/einlesen_regulierungen.html">einlesen_regulierungen()</a></code>: Liest die MV-Regulierungen des VSA ein (diese Tabelle ist immer nur ein Auszug aus der VSA-Datenbank). Eine aktuelle Kopie der Datei wird mitgeliefert (siehe Beispiele im Hilfetext der Funktion).</li>
<li>
<code><a href="reference/einlesen_vsa_lookup.html">einlesen_vsa_lookup()</a></code>: Liest die VSA-Lookup-Tabelle ein, die ein Bezug zwischen Parameter-ID des BAFU und der VSA Substanz_ID herstellt. Eine aktuelle Kopie der Datei wird mitgeliefert (siehe Beispiele im Hilfetext der Funktion).</li>
</ul>
<p>Für alle obigen Funktionen werden mit dem Paket aktuelle Kopien der betreffenden Dateien verteilt. Es ist allerdings auch möglich, eigene Dateien zu verwenden, sofern diese der Formatspezifikation entsprechen (siehe <code><a href="articles/datei-spezifikationen.html">vignette("datei-spezifikationen")</a></code>). Auch werden bereits eingelesene Daten als Objekte im Paket zur Verfügung gestellt (siehe Vignette).</p>
</div>
<div class="section level3">
<h3 id="berechnungen">Berechnungen<a class="anchor" aria-label="anchor" href="#berechnungen"></a>
</h3>
<ul>
<li>
<code><a href="reference/berechne_rq_ue.html">berechne_rq_ue()</a></code>: Berechnet Risikoquotienten und Überschreitungen für AQK und CQK. Output dient als Grundlage für diverse Plot-Funktionen</li>
<li>
<code><a href="reference/berechne_mixtox.html">berechne_mixtox()</a></code>: Berechnet Mischungstoxizitäten aus dem Output von <code><a href="reference/berechne_rq_ue.html">berechne_rq_ue()</a></code>
</li>
<li>
<code>einheiten_normalisieren()</code>: Hilfsfunktion, um bei MV-Daten mit verschiedenen Einheiten (je nach Substanz) überall die gleiche Einheit zu verwenden (Standard: µg/l - wird durch Plotting-Funktionen erwartet).</li>
</ul>
</div>
<div class="section level3">
<h3 id="visualisierungen">Visualisierungen<a class="anchor" aria-label="anchor" href="#visualisierungen"></a>
</h3>
<p>Alle Funktionen zum Plotten sind in der Datei <code>R/plotting.R</code> enthalten.</p>
<ul>
<li>
<code><a href="reference/plot_misch_verlauf.html">plot_misch_verlauf()</a></code>: Konzentrationsverläufe für Einzelsubstanzen, mehrere Substanzen und Summen (auch gruppiert) in verschiedenen Darstellungsarten.</li>
<li>
<code><a href="reference/plot_misch_ue.html">plot_misch_ue()</a></code>: Verlauf von GSchV-Überschreitungen (entweder für kurzzeitige oder andauernde Belastungen) pro Substanz und für eine Station.</li>
<li>
<code><a href="reference/plot_misch_ue_summe.html">plot_misch_ue_summe()</a></code>: Verlauf von GSchV-Überschreitungen pro Jahr und Station mit Unterscheidung nach Überschreitung von numerischem Grenzwert (GSchV Anh. 2) oder allgemeinem Wert für org. Pestizide (0.1 µg/l).</li>
<li>
<code><a href="reference/plot_misch_ue_qk.html">plot_misch_ue_qk()</a></code>: Überschreitungen von QK (für Substanzen ohne spezifischen Anforderungswert in GSchV Anh. 2; entweder CQK oder AQK) im Verhältnis zu Überschreitungen der Substanzen, die in der GSchV aufgelistet sind. Mit Option für detaillierte Darstellung (mit einzelnen Substanzen) für den Vergleich verschiedener Stationen.</li>
<li>
<code><a href="reference/plot_misch_oekotox_uebersicht.html">plot_misch_oekotox_uebersicht()</a></code>: Stationsübersicht Ökotoxbeurteilung (Einzelstoffe und Mischungstoxizität) pro Station und Jahr. Entweder für kurzzeitige oder andauernde Belastungen.</li>
<li>
<code><a href="reference/plot_misch_mixtox_verlauf.html">plot_misch_mixtox_verlauf()</a></code>: Zeitreihe der Mischungstoxizität für mehrere Stationen und Jahre gleichzeitig</li>
<li>
<code><a href="reference/plot_misch_mixtox_haeufigkeit.html">plot_misch_mixtox_haeufigkeit()</a></code>: Zeitreihe der Häufigkeitsverteilung der Mischungstoxizität für eine Station (für kurzzeitige oder andauernde Belastungen)</li>
<li>
<code><a href="reference/plot_stich_uebersicht.html">plot_stich_uebersicht()</a></code>: Übersicht über Stichproben mittels Raster-Darstellung über die Zeit für eine Station. Die Konzentrationen werden dabei durch Farben in logarithmischer Skala dargestellt, wodurch schnell relevante Substanzen identifiziert werden können.</li>
<li>
<code><a href="reference/plot_stich_verlauf.html">plot_stich_verlauf()</a></code>: Konzentrationsverlauf für Stichproben für mehrere Substanzen und Stationen. Gut geeignet für eine interaktive Analyse mit Plotly.</li>
</ul>
<p>Die Rückgaben der Plot-Funktionen sind <code>ggplot2</code>- oder <code>patchwork</code>-Objekte, die weiter bearbeitet werden können, z.B.:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/plot_misch_verlauf.html">plot_misch_verlauf</a></span><span class="op">(</span><span class="va">mvdaten_beispiel_mvwizr</span>, <span class="va">regulierungen_mvwizr</span>, stationscode <span class="op">=</span> <span class="st">"URT010"</span>, plot_typ <span class="op">=</span> <span class="st">"barplot"</span>, id_substanz <span class="op">=</span> <span class="fl">71</span>,plot_bg <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">plot1</span> <span class="op">+</span> <span class="fu">ylim</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.02</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="struktur-des-github-repository">Struktur des github-Repository<a class="anchor" aria-label="anchor" href="#struktur-des-github-repository"></a>
</h2>
<p>Das Paket ist in verschiedene Verzeichnisse unterteilt:</p>
<ul>
<li>
<code>R/</code>: Enthält die R-Skripte, die die Funktionen des Pakets definieren. Die Funktionen sind in zwei Dateien unterteilt: <code>parsing.R</code> für Einlese- und Berechnungsfunktionen und <code>plotting.R</code> für Plotfunktionen (und noch Hilfsdateien wie <code>utils-pipe.R</code>).</li>
<li>
<code>data/</code>: Enthält die Beispieldaten, die mit dem Paket verteilt werden. Diese Daten sind in R-Objekten gespeichert und können direkt verwendet werden. Nicht manuell anpassen.</li>
<li>
<code>data-raw/</code>: Enthält die Skripte, die die Beispieldaten für das Paket erstellen. Die Beispieldaten sind im Verzeichnis <code>data/</code> gespeichert.</li>
<li>
<code>inst/extdata</code>: Enthält zusätzliche Dateien, die mit dem Paket verteilt werden, z.B. die Kopien der MV-Dateien des GBL oder NAWA-MV-Beispieldateien, die mit dem Paket eingelesen werden können.</li>
<li>
<code>man/</code>: Enthält die aus Roxygen-Tags automatisch erstellte Dokumentation des Pakets. Nicht manuell anpassen.</li>
<li>
<code>tests/</code>: Enthält die Tests für das Paket, die mit dem Paket <code>testthat</code> geschrieben werden.</li>
<li>
<code>vignettes/</code>: Enthält die Vignetten des Pakets, die die Verwendung des Pakets demonstrieren. Die Vignetten sind in RMarkdown geschrieben und können mit <code>vignette("name-der-vignette")</code> aufgerufen werden.</li>
<li>
<code>AUTHORS.md</code>: Enthält die Autoren des Pakets</li>
<li>
<code>CHANGELOG.md</code>: Kann Angaben zu Änderungen in den verschiedenen Versionen des Pakets enthalten.</li>
<li>
<code>DESCRIPTION</code>: Enthält die Metadaten des Pakets, wie Name, Version, Autoren, Abhängigkeiten, etc.</li>
<li>
<code>LICENSE</code>: Enthält die Lizenz des Pakets.</li>
<li>
<code>mvwizr.Rproj</code>: Das RStudio-Projekt des Pakets.</li>
<li>
<code>NAMESPACE</code>: Enthält die Definition der Funktionen, die exportiert werden sollen, und der Abhängigkeiten des Pakets. Nicht manuell anpassen.</li>
<li>
<code>NEWS.md</code>: Enthält Neuigkeiten zum Paket, die in den verschiedenen Versionen hinzugefügt wurden.</li>
<li>
<code>README.md</code>: Enthält die automatisch erstellte README-Datei des Pakets für Github. Nicht manuell anpassen.</li>
<li>
<code>README.Rmd</code>: Enthält die README-Datei des Pakets, die in eine README.md-Datei umgewandelt wird.</li>
<li>
<code>scratchpad.R</code>: Enthält Code-Schnipsel, die für das Austesten des Pakets nützlich sind (nicht in installierter Version des Pakets enthalten).</li>
</ul>
<p>Die Funktionen im Paket hängen wie in der nachfolgenden Abbildung dargestellt zusammen (mit den jeweiligen Input-Dateien und Output-Objekten):</p>
<p><img src="reference/figures/mvwizr_struktur_funktionen_interfaces.jpg"></p>
</div>
<div class="section level2">
<h2 id="das-paket-erweitern">Das Paket erweitern<a class="anchor" aria-label="anchor" href="#das-paket-erweitern"></a>
</h2>
<p>Das Paket kann durch Hinzufügen neuer Funktionen und Daten erweitert werden. Eine Checkliste für das Veröffentlichen von Updates findet sich in der Datei <code>RELEASE_RUN.md</code> im Hauptverzeichnis des Repository. Hier sind einige weitere Schritte, die befolgt werden sollten, um das Paket zu erweitern:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Neue Funktionen hinzufügen</strong>: Neue R-Skripte im <code>R</code>-Verzeichnis erstellen (oder die Dateien <code>parsing.R</code> und <code>plotting.R</code> ergänzen) und Funktionen dort definieren. Sicherstellen, dass die Funktionen mit Roxygen-Tag dokumentiert und exportiert werden, damit sie für Benutzer verfügbar sind. Falls die Funktionen Dataframes zurückliefern, sollte die Struktur dieser Dataframes ebenfalls definiert werden (z.B. in der Dokumentation der Beispieldaten im nächsten Schritt).</p></li>
<li><p><strong>Daten hinzufügen</strong>: Mittels Scripts im Verzeichnis <code>data-raw</code> Datensätze erstellen und mit der Funktion <code>usethis::use_data()</code> die Daten im Paket abspeichern. Das Updaten dieser Daten muss manuell gemacht werden. Auch sollten die Daten dokumentiert werden (siehe bestehende Daten mit Dokumentation unter R/data.R).</p></li>
<li><p><strong>Dokumentation aktualisieren</strong>: Die Dokumentation des Pakets aktualisieren, einschliesslich der Vignetten und der Hilfeseiten für die neuen Funktionen und Daten. <code>roxygen2</code> zur Generierung der Dokumentation verwenden (wird in RStudio automatisiert).</p></li>
<li><p><strong>Tests hinzufügen</strong>: Tests für die neuen Funktionen hinzufügen, um sicherzustellen, dass sie korrekt funktionieren. Das <code>testthat</code>-Paket verwenden und Tests im <code>tests/testthat</code>-Verzeichnis speichern.</p></li>
<li><p><strong>Build und Check</strong>: <code>devtools::build()</code> und <code>devtools::check()</code> ausführen, um sicherzustellen, dass das Paket der R CMD CHECK ohne Fehler oder Warnungen besteht. Der R CMD CHECK wird auch automatisiert bei jedem Push auf den <code>main</code>-Branch des GitHub-Repository ausgeführt. Dabei sollten keine Fehler und Warnungen auftreten.</p></li>
<li>
<p><strong>Styleguide</strong>: Der Code sollte dem <a href="https://style.tidyverse.org/" class="external-link">Tidyverse Styleguide</a> entsprechen. Dies kann mit dem Paket <code>styler</code> automatisiert werden. Folgende Punkte für das Erstellen oder erweitern von Funktionen sollten ebenfalls beachtet werden:</p>
<ol style="list-style-type: decimal">
<li>Funktionen sollten möglichst kurz und einfach gehalten werden. Falls eine Funktion zu lang wird, sollte sie in mehrere kleinere Funktionen aufgeteilt werden.</li>
<li>Rückgabewerte von Funktionen müssen typstabil sein, d.h. die Funktion sollte immer denselben Typ zurückgeben, unabhängig von den Eingabeparametern.</li>
<li>Funktionen sollten möglichst keine Seiteneffekte haben, d.h. sie sollten keine globalen Variablen verändern oder auf Dateien schreiben. Wo dies nicht möglich ist (Funktionen zum Lessen und Schreiben, Funktionen, die direkt plotten, oder Funktionen, die auf globale Variablen angewiesen sind), sollte dies in der Dokumentation explizit erwähnt werden.</li>
<li>Funktionsaufrufe sollten immer explizit mit der Angabe des Namespaces sein, d.h. <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code> statt <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter()</a></code>. Dadurch entstehen keine Konflikte (z.B. mit <code><a href="https://rdrr.io/r/stats/filter.html" class="external-link">stats::filter()</a></code>). Die Ausnahme davon sind gewisse Operatoren (z.B. Magrittr-Pipe <code>%&gt;%</code>), die nicht explizit mit dem Namespace aufgerufen werden müssen, da Sie mit expliziten <code>@importFrom</code>-Direktiven in der <code>NAMESPACE</code>-Datei importiert werden (siehe Imports in <code>utils-pipe.R</code> und <code>mvwizr-package</code> - automatisiert mit usethis).</li>
<li>Für das Programmieren mit tidyverse-Funktionen müssen aufgrund der non-standard-evaluation durch tidyverse einige spezielle Konventionen beachtet werden (z.B. die Verwendung der <code>.data</code> und <code>.env</code>-Pronomen in Funktionen, die data-masking verwenden). Diese speziellen Konventionen sind im Artikel <a href="https://dplyr.tidyverse.org/articles/programming.html" class="external-link">Programming with dplyr</a> beschrieben. Weitere fortgeschrittene Konzepte sind im eBook <a href="https://adv-r.hadley.nz/" class="external-link">Advanced R</a> von Hadley Wickham beschrieben.</li>
</ol>
</li>
</ol>
<p>Durch das Befolgen dieser Schritte kann das mvwizr-Paket erweitert und an spezifische Anforderungen angepasst werden. Dabei sollte stets die Dokumentation aktuell gehalten werden und die Versionierung angepasst werden (mit <code>usethis::use_version()</code>).</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="lizenz">
<h2 data-toc-skip>Lizenz</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Vollständige Lizenz</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="zitationsvorschlag">
<h2 data-toc-skip>Zitationsvorschlag</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">mvwizr zitieren</a></li>
</ul>
</div>

<div class="entwicker-innen">
<h2 data-toc-skip>Entwicker:innen</h2>
<ul class="list-unstyled">
<li>Remo Röthlin <br><small class="roles"> Maintainer:in </small>   </li>
<li>Kanton Bern, AWA <br><small class="roles"> Urheberrechtsinhaber:in, Sponsor:in </small>   </li>
<li><a href="authors.html">Mehr zu den Autor:innen</a></li>
</ul>
</div>

<div class="entwicklungsstatus">
<h2 data-toc-skip>Entwicklungsstatus</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ror-at-ebp/mvwizr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ror-at-ebp/mvwizr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/ror-at-ebp/mvwizr" class="external-link"><img src="https://codecov.io/gh/ror-at-ebp/mvwizr/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Entwickelt von Remo Röthlin, Kanton Bern, AWA.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Seite erstellt mit <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
