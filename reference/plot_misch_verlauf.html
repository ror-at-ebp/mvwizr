<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="de"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Verlauf von Mischproben plotten — plot_misch_verlauf • mvwizr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Verlauf von Mischproben plotten — plot_misch_verlauf"><meta name="description" content="Plottet den Konzentrationsverlauf von Mikroverunreinigungen für eine bestimmte Station und Zeitraum. Dabei werden Stichproben (Proben ohne Enddatum) entfernt."><meta property="og:description" content="Plottet den Konzentrationsverlauf von Mikroverunreinigungen für eine bestimmte Station und Zeitraum. Dabei werden Stichproben (Proben ohne Enddatum) entfernt."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mvwizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mvwizr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/datei-spezifikationen.html">Dateispezifikationen für mvwizr</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Verlauf von Mischproben plotten</h1>

      <div class="d-none name"><code>plot_misch_verlauf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plottet den Konzentrationsverlauf von Mikroverunreinigungen für eine bestimmte Station und Zeitraum. Dabei werden Stichproben (Proben ohne Enddatum) entfernt.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_misch_verlauf</span><span class="op">(</span></span>
<span>  <span class="va">mv_daten</span>,</span>
<span>  <span class="va">regulierungen</span>,</span>
<span>  <span class="va">stationscode</span>,</span>
<span>  jahr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_substanz <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  zulassungstyp <span class="op">=</span> <span class="st">"[BP]"</span>,</span>
<span>  plot_typ <span class="op">=</span> <span class="st">"barplot"</span>,</span>
<span>  plot_bg <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot_parametergruppe <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mv-daten">mv_daten<a class="anchor" aria-label="anchor" href="#arg-mv-daten"></a></dt>
<dd><p>Dataframe mit aufbereiteten MV-Daten gemäss Spezifikation</p></dd>


<dt id="arg-regulierungen">regulierungen<a class="anchor" aria-label="anchor" href="#arg-regulierungen"></a></dt>
<dd><p>Dataframe mit aufbereiteten Regulierungs-Daten gemäss Spezifikation</p></dd>


<dt id="arg-stationscode">stationscode<a class="anchor" aria-label="anchor" href="#arg-stationscode"></a></dt>
<dd><p>Station, für welche der Plot erstellt werden soll</p></dd>


<dt id="arg-jahr">jahr<a class="anchor" aria-label="anchor" href="#arg-jahr"></a></dt>
<dd><p>Jahre (numerischer Vektor), für welche ein Verlauf geplottet werden soll. Falls <code>NULL</code> (Vorgabewert), werden alle verfügbaren Daten geplottet.</p></dd>


<dt id="arg-id-substanz">id_substanz<a class="anchor" aria-label="anchor" href="#arg-id-substanz"></a></dt>
<dd><p>Legt fest, ob für eine Substanz (Vektorlänge = 1; z.B. <code>id_substanz = 71</code>), mehrere Substanzen (Vektorlänge &gt; 1; z.B. <code>id_substanz = c(71, 91)</code>) oder alle Substanzen (Summen) der Verlauf geplottet werden soll. Falls <code>NULL</code> (Vorgabewert) wird ein Summenplot erstellt</p></dd>


<dt id="arg-zulassungstyp">zulassungstyp<a class="anchor" aria-label="anchor" href="#arg-zulassungstyp"></a></dt>
<dd><p>Filtert nach der Zulassungsart (Spalte <code>Informationen Recht</code> in Regulierungstabelle). Wird als regulärer Ausdruck interpretiert. Der Vorgabewert filtert nach Bioziden und Pflanzenschutzmitteln (auch mit ausgelaufener Zulassung). Für die Darstellung aller Substanzen (z.B. für gruppierten Barplot) "Alle" verwenden. Falls nur bestimmte Zulassungsschlüssel verwendet werden sollen, dies als regulären Ausdruck angeben (z.B. <code>zulassungstyp = "B|PX"</code> für zugelassene Biozide und/oder nicht mehr zugelassene PSM).</p></dd>


<dt id="arg-plot-typ">plot_typ<a class="anchor" aria-label="anchor" href="#arg-plot-typ"></a></dt>
<dd><p>Plottyp in Abhängigkeit des gewählten Modus bei <code>id_substanz</code>.</p><ul><li><p>Falls <code>length(id_substanz) == 1</code>, sind die folgenden Werte erlaubt: <code>"barplot"</code>, <code>"striche"</code>, <code>"treppen"</code>. Wenn vorhanden, werden minimale und maximale Bestimmungsgrenzen geplottet</p></li>
<li><p>Falls <code>length(id_substanz) &gt; 1</code>, sind die folgenden Werte erlaubt: <code>"striche"</code>, <code>"treppen"</code>. Es werden keine Bestimmungsgrenzen geplottet.</p></li>
<li><p>Falls keine <code>id_substanz</code> angegeben wird, werden Summenplots gezeichnet. Folgende Werte sind erlaubt: <code>"barplot"</code>, <code>"kombiniert"</code>, <code>"treppen"</code>. <code>"kombiniert"</code> stellt eine Kombination der anderen beiden Plottypen dar (z.B. für Kontrollzwecke).</p></li>
</ul></dd>


<dt id="arg-plot-bg">plot_bg<a class="anchor" aria-label="anchor" href="#arg-plot-bg"></a></dt>
<dd><p>Logisch (Vorgabe: <code>TRUE</code>). Sollen Bestimmungsgrenzen, falls vorhanden, gezeichnet werden?</p></dd>


<dt id="arg-plot-parametergruppe">plot_parametergruppe<a class="anchor" aria-label="anchor" href="#arg-plot-parametergruppe"></a></dt>
<dd><p>Name der Spalte (String), die für das Kategorisieren gruppierter Barplots (Summenplots) verwendet werden soll. Für die Daten des GBL Bern "PARAMETERGRUPPE" verwenden.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>ggplot2 Plot-Objekt</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Es sind in Abhängigkeit des Modus (<code>id_substanz</code>) verschiedene Plottypen <code>plot_typ</code> erlaubt:</p>
<ul><li><p><code>"barplot"</code>: Monochromer Barplot; entweder für 1 Substanz oder Summenplots. Es werden auch überlappende Messintervalle dargestellt.</p></li>
<li><p><code>"kombiniert"</code>: Eine Kombination von <code>"barplot"</code> und <code>"treppen"</code> zur Diagnose/Kontrolle.</p></li>
<li><p><code>"striche"</code>: Horizontale Striche; entweder für 1 oder mehrere Substanzen. Es werden auch überlappende Messintervalle dargestellt.</p></li>
<li><p><code>"treppen"</code>: Treppenplot (ähnlich GeomStep). Kurze Messdauern &lt;10 Tagen werden für diese Darstellung entfernt, um die Wahrscheinlichkeit von Überlappungen zu minimieren. Falls dennoch zeitliche Überlappungen existieren, stoppt die Funktion mit einem Fehler.</p></li>
<li><p><code>"barplot_gruppen"</code>: Nur für Summenplots (<code>id_substanz</code> = <code>NULL</code>), wenn <code>plot_parametergruppe</code> (siehe unten) angegeben ist und diese Spalte in den Daten existiert. Zeigt Barplots gruppiert nach einer bestimmten Kategorisierung (z.B. Aufteilung in Pestizide, Haushaltschemikalien und Arzneimittel). Achtung: Damit Stoffe unabhängig vom Zulassungsstatus gezeigt werden, muss bei <code>zulassungstyp</code> "Alle" gesetzt sein.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Summenplot mit Barplot-Darstellung</span></span></span>
<span class="r-in"><span><span class="fu">plot_misch_verlauf</span><span class="op">(</span><span class="va">mvdaten_beispiel_mvwizr</span>, <span class="va">regulierungen_mvwizr</span>, <span class="st">"URT010"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-plt img"><img src="plot_misch_verlauf-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summenplot mit Treppen-Darstellung</span></span></span>
<span class="r-in"><span><span class="fu">plot_misch_verlauf</span><span class="op">(</span><span class="va">mvdaten_beispiel_mvwizr</span>, <span class="va">regulierungen_mvwizr</span>,</span></span>
<span class="r-in"><span>  <span class="st">"URT010"</span>,</span></span>
<span class="r-in"><span>  plot_typ <span class="op">=</span> <span class="st">"treppen"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-plt img"><img src="plot_misch_verlauf-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summenplot mit Treppen-Darstellung bei überlappenden Intervallen - Fehler!</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">plot_misch_verlauf</span><span class="op">(</span><span class="va">mvdaten_beispiel_mvwizr</span>, <span class="va">regulierungen_mvwizr</span>,</span></span>
<span class="r-in"><span>    <span class="st">"MUS001"</span>,</span></span>
<span class="r-in"><span>    plot_typ <span class="op">=</span> <span class="st">"treppen"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Verlauf von Einzelsubstanzen mit Barplots und Anzeige der Bestimmungsgrenze:</span></span></span>
<span class="r-in"><span><span class="fu">plot_misch_verlauf</span><span class="op">(</span><span class="va">mvdaten_beispiel_mvwizr</span>, <span class="va">regulierungen_mvwizr</span>,</span></span>
<span class="r-in"><span>  <span class="st">"URT010"</span>,</span></span>
<span class="r-in"><span>  id_substanz <span class="op">=</span> <span class="fl">71</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-plt img"><img src="plot_misch_verlauf-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Verlauf mehrerer Substanzen mit Strichen:</span></span></span>
<span class="r-in"><span><span class="fu">plot_misch_verlauf</span><span class="op">(</span><span class="va">mvdaten_beispiel_mvwizr</span>, <span class="va">regulierungen_mvwizr</span>,</span></span>
<span class="r-in"><span>  <span class="st">"URT010"</span>,</span></span>
<span class="r-in"><span>  plot_typ <span class="op">=</span> <span class="st">"striche"</span>, id_substanz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">71</span>, <span class="fl">91</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-plt img"><img src="plot_misch_verlauf-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Verlauf Summe aller Substanzen (nicht nur Pestizide) als gruppierte Barplots</span></span></span>
<span class="r-in"><span><span class="fu">plot_misch_verlauf</span><span class="op">(</span><span class="va">mvdaten_beispiel_mvwizr</span>, <span class="va">regulierungen_mvwizr</span>,</span></span>
<span class="r-in"><span>  <span class="st">"URT010"</span>,</span></span>
<span class="r-in"><span>  plot_typ <span class="op">=</span> <span class="st">"barplot_gruppen"</span>, zulassungstyp <span class="op">=</span> <span class="st">"Alle"</span>,</span></span>
<span class="r-in"><span>  plot_parametergruppe <span class="op">=</span> <span class="st">"PARAMETERGRUPPE"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>OS reports request to set locale to "de_CH.utf8" cannot be honored</span>
<span class="r-plt img"><img src="plot_misch_verlauf-5.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Remo Röthlin, Kanton Bern, AWA.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

