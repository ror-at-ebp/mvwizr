<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Dateispezifikationen für mvwizr • mvwizr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dateispezifikationen für mvwizr">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mvwizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/mvwizr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/datei-spezifikationen.html">Dateispezifikationen für mvwizr</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Dateispezifikationen für mvwizr</h1>
            
      

      <div class="d-none name"><code>datei-spezifikationen.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ror-at-ebp.github.io/mvwizr/">mvwizr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="einleitung">Einleitung<a class="anchor" aria-label="anchor" href="#einleitung"></a>
</h2>
<p>Das vorliegende R-Paket mvwizr setzt Eingabedateien (für die
<code>einlesen_*()</code> Funktionen) resp. Dataframes (Funktionen für
Berechnungen und Visualisierungen) mit spezifizierter Struktur voraus.
Im Grundsatz überprüft mvwizr nicht die genaue Struktur einer jeden
Eingabe, sondern prüft das Vorhandensein bestimmter relevanter Elemente
(v.a. Spaltennamen) und führt einige Tests durch um Daten zu validieren.
Im Folgenden werden Eingaben mit den geforderten Strukturen beschrieben.
Beispieldaten sind ebenfalls im Paket enthalten und referenziert.</p>
</div>
<div class="section level2">
<h2 id="the-big-picture">The Big Picture<a class="anchor" aria-label="anchor" href="#the-big-picture"></a>
</h2>
<p>Die verschiedenen hier benutzten Tabellen stehen in einer Beziehung
zueinander, wobei die Regulierungsdaten und Qualitätskriterien nur über
die VSA Substanz_ID zugänglich sind:</p>
<p><img src="mvwizr_daten_schema.png" style="width:100.0%"></p>
<div class="section level3">
<h3 id="mikroverunreinigungsdaten-messdaten">Mikroverunreinigungsdaten (Messdaten)<a class="anchor" aria-label="anchor" href="#mikroverunreinigungsdaten-messdaten"></a>
</h3>
<div class="section level4">
<h4 id="mv-daten-gbl-kt--bern">MV-Daten GBL Kt. Bern<a class="anchor" aria-label="anchor" href="#mv-daten-gbl-kt--bern"></a>
</h4>
<p>Die MV-Daten des GBL Kt. Bern sind kommagetrennte Textdaten, bei
denen jede Zeile ein Messwert darstellt. Die folgenden Spalten müssen
(mindestens) in den Daten enthalten sein. Dabei sind auch erwartete
R-Datentypen und Formate angegeben:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="69%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Beschreibung</th>
<th>Formatierung</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>CODE</td>
<td>Stationscode</td>
<td><code>character</code></td>
</tr>
<tr class="even">
<td>STANDORT</td>
<td>Standort Station</td>
<td><code>character</code></td>
</tr>
<tr class="odd">
<td>NAME</td>
<td>Name des Gewässers</td>
<td><code>character</code></td>
</tr>
<tr class="even">
<td>PROBEARTID</td>
<td>Art der Probe: Stichprobe (S), Mischprobe (SaP) oder berechnete
Mischprobe (bSaP)</td>
<td><code>character</code></td>
</tr>
<tr class="odd">
<td>BEGINNPROBENAHME</td>
<td>Beginn der Probenahme</td>
<td>
<code>datetime</code> (DD/MM/YYYY hh:mm:ss)</td>
</tr>
<tr class="even">
<td>ENDEPROBENAHME</td>
<td>Bei Mischproben Ende der Probenahme. Bei Stichproben leer.</td>
<td>
<code>datetime</code> (DD/MM/YYYY hh:mm:ss)</td>
</tr>
<tr class="odd">
<td>PARAMETERID_BAFU</td>
<td>BAFU-Schlüssel für Substanz. Wird verwendet um Daten mit der VSA
<code>ID_Substanz</code> zu verknüpfen.</td>
<td><code>character</code></td>
</tr>
<tr class="even">
<td>BEZEICHNUNG_BAFU</td>
<td>Deutsche Parameter-Bezeichnung des BAFU. Wird von Plotfunktionen
verwendet für Beschriftungen.</td>
<td><code>character</code></td>
</tr>
<tr class="odd">
<td>OPERATOR</td>
<td>Falls “&lt;”, liegt der Messwert unter der Bestimmungsgrenze und die
Bestimmungsgrenze wird im Feld <code>WERT_NUM</code> angegeben.</td>
<td><code>character</code></td>
</tr>
<tr class="even">
<td>EINHEIT</td>
<td>Einheit des Messwertes in “ng/l” oder “pg/l”</td>
<td><code>character</code></td>
</tr>
<tr class="odd">
<td>WERT_NUM</td>
<td>Messwert oder berechneter Wert</td>
<td><code>numeric</code></td>
</tr>
<tr class="even">
<td>MSTLTYP</td>
<td>Messstellentyp</td>
<td><code>character</code></td>
</tr>
<tr class="odd">
<td>PARAMETERGRUPPEID</td>
<td>Parametergruppencode des GBL</td>
<td><code>integer</code></td>
</tr>
<tr class="even">
<td>PARAMETERGRUPPE</td>
<td>Bezeichnung der Parametergruppe des GBL</td>
<td><code>character</code></td>
</tr>
</tbody>
</table>
<p>Beispieldaten finden sich im Paket:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mv_beispiele</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Daten_Urtenentxt.txt"</span>, <span class="st">"Daten_Balmoosbach.txt"</span>, <span class="st">"Daten_Chruemlisbachxt.txt"</span>, <span class="st">"Stichproben_Sensetal.txt"</span>, <span class="st">"Daten_Balmoosbach_bsp_berechnet.txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="va">mv_beispiele</span>, package <span class="op">=</span> <span class="st">"mvwizr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="andere-mv-daten">Andere MV-Daten<a class="anchor" aria-label="anchor" href="#andere-mv-daten"></a>
</h4>
<p>Andere MV-Daten müssen als dataframe/tibble vorliegen, wobei je eine
Zeile eine Messung an einem Standort für eine bestimmte Substanz
darstellt. Dabei müssen mindestens die folgenden Variablen vorhanden
seine (siehe oben und auch auch <code><a href="../reference/mvdaten_beispiel_mvwizr.html">?mvdaten_beispiel_mvwizr</a></code>
für Type jeder Variable):</p>
<ul>
<li>UID</li>
<li>CODE</li>
<li>STANDORT</li>
<li>NAME</li>
<li>PROBEARTID</li>
<li>BEGINNPROBENAHME</li>
<li>ENDEPROBENAHME</li>
<li>PARAMETERID_BAFU</li>
<li>BEZEICHNUNG_BAFU</li>
<li>ID_Substanz</li>
<li>WERT_NUM</li>
</ul>
<p>Für die Anzeige der Bestimmungsgrenze ist BG_min und BG_max
erforderlich.</p>
</div>
</div>
<div class="section level3">
<h3 id="regulierungen-und-zulassungen">Regulierungen und Zulassungen<a class="anchor" aria-label="anchor" href="#regulierungen-und-zulassungen"></a>
</h3>
<p>Hierbei handelt es sich um die Tabelle
<code>anf_Substanz_recht_2024.xlsx</code> des VSA, welche Informationen
zum Regulierungs- und Zulassungsstatus verschiedener
Mikroverunreinigungen auflistet (zum Zeitpunkt/Jahr der Erstellung der
Tabelle - in diesem Fall 2024).</p>
<p>Die folgenden Spalten müssen (mindestens) in der Tabelle enthalten
sein:</p>
<table class="table">
<colgroup>
<col width="12%">
<col width="79%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Beschreibung</th>
<th>Formatierung</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ID_Substanz</td>
<td>VSA-ID</td>
<td><code>integer</code></td>
</tr>
<tr class="even">
<td>Name</td>
<td>Stoffbezeichnung des VSA</td>
<td><code>character</code></td>
</tr>
<tr class="odd">
<td>Informationen Recht</td>
<td>Zeichenkette mit codierten Regulierungsinformationen</td>
<td><code>character</code></td>
</tr>
<tr class="even">
<td>GSCHV</td>
<td>Gibt an, ob und wie die Substanz in der GSCHV reguliert ist. 1 =
Spezifischer Wert in Anh. 2; 2 = allgemeiner Grenzwert von 0.1 µg/l</td>
<td><code>integer</code></td>
</tr>
</tbody>
</table>
<p>Legende zu den <code>Informationen Recht</code>:</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="23%">
<col width="4%">
<col width="67%">
</colgroup>
<thead><tr class="header">
<th>ID_Recht</th>
<th>Rechtsordnung</th>
<th>Kürzel</th>
<th>Kommentar</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>PSMV Anhang 1</td>
<td>P</td>
<td>Pflanzenschutzmittel zugelassen im aktuellen Jahr in Verordnung und
Verzeichnis</td>
</tr>
<tr class="even">
<td>2</td>
<td>PSMV Anhang 10</td>
<td></td>
<td>Zu überprüfende Pflanzenschutzmittel</td>
</tr>
<tr class="odd">
<td>3</td>
<td>PSMV Substitutionskandidat</td>
<td></td>
<td>Anhang 1 Abschnitt E - Substitutionskandidaten</td>
</tr>
<tr class="even">
<td>4</td>
<td>PSMV nicht zugelassen</td>
<td>PX</td>
<td>Pflanzenschutzmittel Wirkstoffe im akutellen Jahr nicht zugelassen
weder Verordung noch Verzeichnis</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Zugelassene Biozide</td>
<td>B</td>
<td>Biozide mit einem Gesuch zur Zulassung</td>
</tr>
<tr class="even">
<td>6</td>
<td>Biozide non-inclusions</td>
<td>BX</td>
<td>Biozide die nicht zugelassen wurden</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Schweizspezifische MV ARA</td>
<td></td>
<td>Liste von C. Götz</td>
</tr>
<tr class="even">
<td>8</td>
<td>Schweizspezifische MV diffus</td>
<td></td>
<td>Liste aus diffusem Projekt</td>
</tr>
<tr class="odd">
<td>9</td>
<td>Leitsubstanzen ARA Eliminationseistung</td>
<td>ARA</td>
<td>Leitsubstanzen für die Überprüfung der Eliminationsleistung von
ARA</td>
</tr>
<tr class="even">
<td>10</td>
<td>WRRL</td>
<td>WRRL</td>
<td>Stoffe is in der Wasserrahmenrichtlinie als Prioritär
eingestuft</td>
</tr>
<tr class="odd">
<td>11</td>
<td>neue Priortäre Stoffe WRRL</td>
<td></td>
<td>Liste neuer Prioritärer Stoffe der EU (Stand 2015)</td>
</tr>
<tr class="even">
<td>12</td>
<td>Watchlist EU</td>
<td>WL.EU</td>
<td>Stoff ist auf der Watchlist der EU</td>
</tr>
<tr class="odd">
<td>14</td>
<td>GSCHV</td>
<td>GSchV</td>
<td>Anhang 2 GSchV mit subst. spezifischer, ökotox. begründeter num. Anf
für anhaltende Belastung in Gew. die nicht TW dienen</td>
</tr>
<tr class="even">
<td>15</td>
<td>Arzneimittel</td>
<td>HA</td>
<td>Human Arzneimittel gemäss Liste der Swissmedic</td>
</tr>
<tr class="odd">
<td>16</td>
<td>Tierarzneimittel</td>
<td>TA</td>
<td>Tierarzneimittel gemäss Liste der vetpham</td>
</tr>
<tr class="even">
<td>17</td>
<td>PSM in Verzeichnis aber nicht Verordnung</td>
<td>PX*</td>
<td>Pflanzenschutzmittel zugelassen im aktuellen Jahr nicht in
Verordnung aber im Verzeichnis</td>
</tr>
<tr class="odd">
<td>18</td>
<td>PSM in Verordnung aber nicht Verzeichnis</td>
<td>PX°</td>
<td>Pflanzenschutzmittel zugelassen im aktuellen Jahr in Verordnung aber
kein zugelassenes Produkt im Verzeichnis</td>
</tr>
</tbody>
</table>
<p>Eine Kopie dieser Tabelle befindet sich im Paket:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"anf_Substanz_recht_2024.xlsx"</span>, package <span class="op">=</span> <span class="st">"mvwizr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="qualitätskriterien">Qualitätskriterien<a class="anchor" aria-label="anchor" href="#qualit%C3%A4tskriterien"></a>
</h3>
<p>Hierbei handelt es sich um Qualitätskriterien des VSA zu
Mikroverunreinigungen. Die folgenden Spalten müssen (mindestens) in der
Tabelle enthalten sein:</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="74%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Beschreibung</th>
<th>Formatierung</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ID_Substanz</td>
<td>VSA-ID</td>
<td><code>integer</code></td>
</tr>
<tr class="even">
<td>CQK (µg/l)</td>
<td>Chronisches Qualitätskriterium</td>
<td><code>numeric</code></td>
</tr>
<tr class="odd">
<td>AQK (µg/l)</td>
<td>Akutes Qualitätskriterium</td>
<td><code>numeric</code></td>
</tr>
<tr class="even">
<td>P_chron</td>
<td>Gibt an, ob CQK zu berücksichtigen für Mischtoxizität bei
Pflanzen</td>
<td><code>integer</code></td>
</tr>
<tr class="odd">
<td>I_chron</td>
<td>Gibt an, ob CQK zu berücksichtigen für Mischtoxizität bei
Invertebraten</td>
<td><code>integer</code></td>
</tr>
<tr class="even">
<td>V_chron</td>
<td>Gibt an, ob CQK zu berücksichtigen für Mischtoxizität bei
Vertebraten</td>
<td><code>integer</code></td>
</tr>
<tr class="odd">
<td>P_akut</td>
<td>Gibt an, ob AQK zu berücksichtigen für Mischtoxizität bei
Pflanzen</td>
<td><code>integer</code></td>
</tr>
<tr class="even">
<td>I_akut</td>
<td>Gibt an, ob AQK zu berücksichtigen für Mischtoxizität bei
Invertebraten</td>
<td><code>integer</code></td>
</tr>
<tr class="odd">
<td>V_akut</td>
<td>Gibt an, ob AQK zu berücksichtigen für Mischtoxizität bei
Vertebraten</td>
<td><code>integer</code></td>
</tr>
<tr class="even">
<td>Robustheit QK</td>
<td>Robustheit des QK. Wert 1-3, wobei QK mit einem Wert von 3 nicht
verwendet werden</td>
<td><code>integer</code></td>
</tr>
</tbody>
</table>
<p>Eine Kopie dieser Tabelle befindet sich im Paket:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Dat_Qual_kriterien.xlsx"</span>, package <span class="op">=</span> <span class="st">"mvwizr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="vsa-id-lookup">VSA-ID Lookup<a class="anchor" aria-label="anchor" href="#vsa-id-lookup"></a>
</h3>
<p>Hierbei handelt es sich um eine Tabelle mit deren Hilfe die
Parameter-ID des BAFU mit der Substanz_ID des VSA verknüpft werden kann.
Die folgenden Spalten müssen (mindestens) in der Tabelle enthalten
sein:</p>
<table class="table">
<thead><tr class="header">
<th>Variable</th>
<th>Beschreibung</th>
<th>Formatierung</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ID_Substanz</td>
<td>VSA-ID</td>
<td><code>integer</code></td>
</tr>
<tr class="even">
<td>Parameter-ID</td>
<td>BAFU Parameter-ID</td>
<td><code>character</code></td>
</tr>
</tbody>
</table>
<p>Eine Kopie dieser Tabelle befindet sich im Paket:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Tab_Substanzen.xlsx"</span>, package <span class="op">=</span> <span class="st">"mvwizr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bafu-datenaustausch-lookup">BAFU Datenaustausch Lookup<a class="anchor" aria-label="anchor" href="#bafu-datenaustausch-lookup"></a>
</h3>
<p>Hierbei handelt es sich um eine Tabelle des BAFU um Deutsche und
Französische Bezeichnungen für die Stoffe mit dem BAFU-Parameter-ID
Schlüssel (Bezeichnung ohne Sonderzeichen) abzugleichen. Die folgenden
Spalten müssen (mindestens) in der Tabelle enthalten sein:</p>
<table class="table">
<colgroup>
<col width="56%">
<col width="28%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Beschreibung</th>
<th>Formatierung</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Parameter-ID / ID paramètre</td>
<td>BAFU Parameter-ID</td>
<td><code>character</code></td>
</tr>
<tr class="even">
<td>Deutsche Bezeichnung / Désignation en allemand</td>
<td>Deutsche Bezeichnung</td>
<td><code>character</code></td>
</tr>
<tr class="odd">
<td>Französische Bezeichnung / Désignation en français</td>
<td>Französische Bezeichnung</td>
<td><code>character</code></td>
</tr>
</tbody>
</table>
<p>Eine Kopie dieser Tabelle befindet sich im Paket:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"BAFU_Liste_Parameter_Bezeichnungen_Datenaustausch.xlsx"</span>, package <span class="op">=</span> <span class="st">"mvwizr"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Remo Röthlin, Kanton Bern, AWA.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
